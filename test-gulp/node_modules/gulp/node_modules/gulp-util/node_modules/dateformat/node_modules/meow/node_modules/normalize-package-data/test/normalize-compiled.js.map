{"version":3,"sources":["normalize.js"],"names":[],"mappings":"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","file":"normalize-compiled.js","sourcesContent":["var tap = require(\"tap\")\nvar fs = require(\"fs\")\nvar path = require(\"path\")\n\nvar normalize = require(\"../lib/normalize\")\nvar warningMessages = require(\"../lib/warning_messages.json\")\nvar safeFormat = require(\"../lib/safe_format\")\n\nvar rpjPath = path.resolve(__dirname,\"./fixtures/read-package-json.json\")\n\ntap.test(\"normalize some package data\", function(t) {\n  var packageData = require(rpjPath)\n  var warnings = []\n  normalize(packageData, function(warning) {\n    warnings.push(warning)\n  })\n  // there's no readme data in this particular object\n  t.equal( warnings.length, 1, \"There's exactly one warning.\")\n  fs.readFile(rpjPath, function(err, data) {\n    if(err) throw err\n    // Various changes have been made\n    t.notEqual(packageData, JSON.parse(data), \"Output is different from input.\")\n    t.end()\n  })\n})\n\ntap.test(\"runs without passing warning function\", function(t) {\n  var packageData = require(rpjPath)\n  fs.readFile(rpjPath, function(err, data) {\n    if(err) throw err\n    normalize(JSON.parse(data))\n    t.ok(true, \"If you read this, this means I'm still alive.\")\n    t.end()\n  })\n})\n\ntap.test(\"empty object\", function(t) {\n  var packageData = {}\n  var expect =\n    { name: '',\n      version: '',\n      readme: 'ERROR: No README data found!',\n      _id: '@' }\n\n  var warnings = []\n  function warn(m) {\n    warnings.push(m)\n  }\n  normalize(packageData, warn)\n  t.same(packageData, expect)\n  t.same(warnings, [\n    warningMessages.missingDescription,\n    warningMessages.missingRepository,\n    warningMessages.missingReadme,\n    warningMessages.missingLicense\n  ])\n  t.end()\n})\n\ntap.test(\"core module name\", function(t) {\n  var warnings = []\n  function warn(m) {\n    warnings.push(m)\n  }\n  var a\n  normalize(a={\n    name: \"http\",\n    readme: \"read yourself how about\",\n    homepage: 123,\n    bugs: \"what is this i don't even\",\n    repository: \"Hello.\"\n  }, warn)\n\n  var expect = [\n      safeFormat(warningMessages.conflictingName, 'http'),\n      warningMessages.nonEmailUrlBugsString,\n      warningMessages.emptyNormalizedBugs,\n      warningMessages.nonUrlHomepage,\n      warningMessages.missingLicense\n      ]\n  t.same(warnings, expect)\n  t.end()\n})\n\ntap.test(\"urls required\", function(t) {\n  var warnings = []\n  function warn(w) {\n    warnings.push(w)\n  }\n  normalize({\n    bugs: {\n      url: \"/1\",\n      email: \"not an email address\"\n    }\n  }, warn)\n  var a\n  normalize(a={\n    readme: \"read yourself how about\",\n    homepage: 123,\n    bugs: \"what is this i don't even\",\n    repository: \"Hello.\"\n  }, warn)\n\n  console.error(a)\n\n  var expect =\n    [ warningMessages.missingDescription,\n      warningMessages.missingRepository,\n      warningMessages.nonUrlBugsUrlField,\n      warningMessages.nonEmailBugsEmailField,\n      warningMessages.emptyNormalizedBugs,\n      warningMessages.missingReadme,\n      warningMessages.missingLicense,\n      warningMessages.nonEmailUrlBugsString,\n      warningMessages.emptyNormalizedBugs,\n      warningMessages.nonUrlHomepage,\n      warningMessages.missingLicense]\n  t.same(warnings, expect)\n  t.end()\n})\n\ntap.test(\"homepage field must start with a protocol.\", function(t) {\n  var warnings = []\n  function warn(w) {\n    warnings.push(w)\n  }\n  var a\n  normalize(a={\n    homepage: 'example.org'\n  }, warn)\n\n  console.error(a)\n\n  var expect =\n    [ warningMessages.missingDescription,\n      warningMessages.missingRepository,\n      warningMessages.missingReadme,\n      warningMessages.missingProtocolHomepage,\n      warningMessages.missingLicense]\n  t.same(warnings, expect)\n  t.same(a.homepage, 'http://example.org')\n  t.end()\n})\n\ntap.test(\"license field should be a valid SPDX expression\", function(t) {\n  var warnings = []\n  function warn(w) {\n    warnings.push(w)\n  }\n  var a\n  normalize(a={\n    license: 'Apache 2'\n  }, warn)\n\n  console.error(a)\n\n  var expect =\n    [ warningMessages.missingDescription,\n      warningMessages.missingRepository,\n      warningMessages.missingReadme,\n      warningMessages.invalidLicense]\n  t.same(warnings, expect)\n  t.end()\n})\n\ntap.test(\"gist bugs url\", function(t) {\n  var d = {\n    repository: \"git@gist.github.com:123456.git\"\n  }\n  normalize(d)\n  t.same(d.repository, { type: 'git', url: 'git+ssh://git@gist.github.com/123456.git' })\n  t.same(d.bugs, { url: 'https://gist.github.com/123456' })\n  t.end();\n});\n\ntap.test(\"singularize repositories\", function(t) {\n  var d = {repositories:[\"git@gist.github.com:123456.git\"]}\n  normalize(d)\n  t.same(d.repository, { type: 'git', url: 'git+ssh://git@gist.github.com/123456.git' })\n  t.end()\n});\n\ntap.test(\"treat visionmedia/express as github repo\", function(t) {\n  var d = {repository: {type: \"git\", url: \"visionmedia/express\"}}\n  normalize(d)\n  t.same(d.repository, { type: \"git\", url: \"git+https://github.com/visionmedia/express.git\" })\n  t.end()\n});\n\ntap.test(\"treat isaacs/node-graceful-fs as github repo\", function(t) {\n  var d = {repository: {type: \"git\", url: \"isaacs/node-graceful-fs\"}}\n  normalize(d)\n  t.same(d.repository, { type: \"git\", url: \"git+https://github.com/isaacs/node-graceful-fs.git\" })\n  t.end()\n});\n\ntap.test(\"homepage field will set to github url if repository is a github repo\", function(t) {\n  var a\n  normalize(a={\n    repository: { type: \"git\", url: \"https://github.com/isaacs/node-graceful-fs\" }\n  })\n  t.same(a.homepage, 'https://github.com/isaacs/node-graceful-fs#readme')\n  t.end()\n})\n\ntap.test(\"homepage field will set to github gist url if repository is a gist\", function(t) {\n  var a\n  normalize(a={\n    repository: { type: \"git\", url: \"git@gist.github.com:123456.git\" }\n  })\n  t.same(a.homepage, 'https://gist.github.com/123456')\n  t.end()\n})\n\ntap.test(\"homepage field will set to github gist url if repository is a shorthand reference\", function(t) {\n  var a\n  normalize(a={\n    repository: { type: \"git\", url: \"sindresorhus/chalk\" }\n  })\n  t.same(a.homepage, 'https://github.com/sindresorhus/chalk#readme')\n  t.end()\n})\n\ntap.test(\"don't mangle github shortcuts in dependencies\", function(t) {\n  var d = {dependencies: {\"node-graceful-fs\": \"isaacs/node-graceful-fs\"}}\n  normalize(d)\n  t.same(d.dependencies, {\"node-graceful-fs\": \"github:isaacs/node-graceful-fs\" })\n  t.end()\n});\n\ntap.test(\"deprecation warning for array in dependencies fields\", function(t) {\n  var a\n  var warnings = []\n  function warn(w) {\n    warnings.push(w)\n  }\n  normalize(a={\n    dependencies: [],\n    devDependencies: [],\n    optionalDependencies: []\n  }, warn)\n  t.ok(~warnings.indexOf(safeFormat(warningMessages.deprecatedArrayDependencies, 'dependencies')), \"deprecation warning\")\n  t.ok(~warnings.indexOf(safeFormat(warningMessages.deprecatedArrayDependencies, 'devDependencies')), \"deprecation warning\")\n  t.ok(~warnings.indexOf(safeFormat(warningMessages.deprecatedArrayDependencies, 'optionalDependencies')), \"deprecation warning\")\n  t.end()\n})\n"]}