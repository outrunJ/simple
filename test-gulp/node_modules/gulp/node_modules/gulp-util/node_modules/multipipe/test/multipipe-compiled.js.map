{"version":3,"sources":["multipipe.js"],"names":[],"mappings":"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","file":"multipipe-compiled.js","sourcesContent":["var assert = require('assert');\nvar pipe = require('..');\nvar Stream = require('stream');\n\ndescribe('pipe(a)', function(){\n  it('should return a', function(){\n    var readable = Readable();\n    var stream = pipe(readable);\n    assert.equal(stream, readable);\n  });\n});\n\ndescribe('pipe(a, b, c)', function(){\n  it('should pipe internally', function(done){\n    pipe(Readable(), Transform(), Writable(done));\n  });\n  \n  it('should be writable', function(done){\n    var stream = pipe(Transform(), Writable(done));\n    assert(stream.writable);\n    Readable().pipe(stream);\n  });\n\n  it('should be readable', function(done){\n    var stream = pipe(Readable(), Transform());\n    assert(stream.readable);\n    stream.pipe(Writable(done));\n  });\n  \n  it('should be readable and writable', function(done){\n    var stream = pipe(Transform(), Transform());\n    assert(stream.readable);\n    assert(stream.writable);\n    Readable()\n    .pipe(stream)\n    .pipe(Writable(done));\n  });\n \n  describe('errors', function(){\n    it('should reemit', function(done){\n      var a = Transform();\n      var b = Transform();\n      var c = Transform();\n      var stream = pipe(a, b, c);\n      var err = new Error;\n      var i = 0;\n      \n      stream.on('error', function(_err){\n        i++;\n        assert.equal(_err, err);\n        assert(i <= 3);\n        if (i == 3) done();\n      });\n      \n      a.emit('error', err);\n      b.emit('error', err);\n      c.emit('error', err);\n    });\n\n    it('should not reemit endlessly', function(done){\n      var a = Transform();\n      var b = Transform();\n      var c = Transform();\n      c.readable = false;\n      var stream = pipe(a, b, c);\n      var err = new Error;\n      var i = 0;\n      \n      stream.on('error', function(_err){\n        i++;\n        assert.equal(_err, err);\n        assert(i <= 3);\n        if (i == 3) done();\n      });\n      \n      a.emit('error', err);\n      b.emit('error', err);\n      c.emit('error', err);\n    });\n  });\n});\n\ndescribe('pipe(a, b, c, fn)', function(){\n  it('should call on finish', function(done){\n    var finished = false;\n    var a = Readable();\n    var b = Transform();\n    var c = Writable(function(){\n      finished = true;\n    });\n\n    pipe(a, b, c, function(err){\n      assert(!err);\n      assert(finished);\n      done();\n    });\n  });\n\n  it('should call with error once', function(done){\n    var a = Readable();\n    var b = Transform();\n    var c = Writable();\n    var err = new Error;\n\n    pipe(a, b, c, function(err){\n      assert(err);\n      done();\n    });\n\n    a.emit('error', err);\n    b.emit('error', err);\n    c.emit('error', err);\n  });\n});\n\nfunction Readable(){\n  var readable = new Stream.Readable({ objectMode: true });\n  readable._read = function(){\n    this.push('a');\n    this.push(null);\n  };\n  return readable;\n}\n\nfunction Transform(){\n  var transform = new Stream.Transform({ objectMode: true });\n  transform._transform = function(chunk, _, done){\n    done(null, chunk.toUpperCase());\n  };\n  return transform;\n}\n\nfunction Writable(cb){\n  var writable = new Stream.Writable({ objectMode: true });\n  writable._write = function(chunk, _, done){\n    assert.equal(chunk, 'A');\n    done();\n    cb();\n  };\n  return writable;\n}\n"]}