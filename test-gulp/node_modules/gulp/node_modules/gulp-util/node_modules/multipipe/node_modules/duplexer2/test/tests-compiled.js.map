{"version":3,"sources":["tests.js"],"names":[],"mappings":"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","file":"tests-compiled.js","sourcesContent":["var assert = require(\"chai\").assert;\n\nvar stream = require(\"readable-stream\");\n\nvar duplexer2 = require(\"../\");\n\ndescribe(\"duplexer2\", function() {\n  var writable, readable;\n\n  beforeEach(function() {\n    writable = new stream.Writable({objectMode: true});\n    readable = new stream.Readable({objectMode: true});\n\n    writable._write = function _write(input, encoding, done) {\n      return done();\n    };\n\n    readable._read = function _read(n) {\n    };\n  });\n\n  it(\"should interact with the writable stream properly for writing\", function(done) {\n    var duplex = duplexer2(writable, readable);\n\n    writable._write = function _write(input, encoding, _done) {\n      assert.strictEqual(input, \"well hello there\");\n\n      return done();\n    };\n\n    duplex.write(\"well hello there\");\n  });\n\n  it(\"should interact with the readable stream properly for reading\", function(done) {\n    var duplex = duplexer2(writable, readable);\n\n    duplex.on(\"data\", function(e) {\n      assert.strictEqual(e, \"well hello there\");\n\n      return done();\n    });\n\n    readable.push(\"well hello there\");\n  });\n\n  it(\"should end the writable stream, causing it to finish\", function(done) {\n    var duplex = duplexer2(writable, readable);\n\n    writable.once(\"finish\", done);\n\n    duplex.end();\n  });\n\n  it(\"should finish when the writable stream finishes\", function(done) {\n    var duplex = duplexer2(writable, readable);\n\n    duplex.once(\"finish\", done);\n\n    writable.end();\n  });\n\n  it(\"should end when the readable stream ends\", function(done) {\n    var duplex = duplexer2(writable, readable);\n\n    // required to let \"end\" fire without reading\n    duplex.resume();\n    duplex.once(\"end\", done);\n\n    readable.push(null);\n  });\n\n  it(\"should bubble errors from the writable stream when no behaviour is specified\", function(done) {\n    var duplex = duplexer2(writable, readable);\n\n    var originalErr = Error(\"testing\");\n\n    duplex.on(\"error\", function(err) {\n      assert.strictEqual(err, originalErr);\n\n      return done();\n    });\n\n    writable.emit(\"error\", originalErr);\n  });\n\n  it(\"should bubble errors from the readable stream when no behaviour is specified\", function(done) {\n    var duplex = duplexer2(writable, readable);\n\n    var originalErr = Error(\"testing\");\n\n    duplex.on(\"error\", function(err) {\n      assert.strictEqual(err, originalErr);\n\n      return done();\n    });\n\n    readable.emit(\"error\", originalErr);\n  });\n\n  it(\"should bubble errors from the writable stream when bubbleErrors is true\", function(done) {\n    var duplex = duplexer2({bubbleErrors: true}, writable, readable);\n\n    var originalErr = Error(\"testing\");\n\n    duplex.on(\"error\", function(err) {\n      assert.strictEqual(err, originalErr);\n\n      return done();\n    });\n\n    writable.emit(\"error\", originalErr);\n  });\n\n  it(\"should bubble errors from the readable stream when bubbleErrors is true\", function(done) {\n    var duplex = duplexer2({bubbleErrors: true}, writable, readable);\n\n    var originalErr = Error(\"testing\");\n\n    duplex.on(\"error\", function(err) {\n      assert.strictEqual(err, originalErr);\n\n      return done();\n    });\n\n    readable.emit(\"error\", originalErr);\n  });\n\n  it(\"should not bubble errors from the writable stream when bubbleErrors is false\", function(done) {\n    var duplex = duplexer2({bubbleErrors: false}, writable, readable);\n\n    var timeout = setTimeout(done, 25);\n\n    duplex.on(\"error\", function(err) {\n      clearTimeout(timeout);\n\n      return done(Error(\"shouldn't bubble error\"));\n    });\n\n    // prevent uncaught error exception\n    writable.on(\"error\", function() {});\n\n    writable.emit(\"error\", Error(\"testing\"));\n  });\n\n  it(\"should not bubble errors from the readable stream when bubbleErrors is false\", function(done) {\n    var duplex = duplexer2({bubbleErrors: false}, writable, readable);\n\n    var timeout = setTimeout(done, 25);\n\n    duplex.on(\"error\", function(err) {\n      clearTimeout(timeout);\n\n      return done(Error(\"shouldn't bubble error\"));\n    });\n\n    // prevent uncaught error exception\n    readable.on(\"error\", function() {});\n\n    readable.emit(\"error\", Error(\"testing\"));\n  });\n});\n"]}