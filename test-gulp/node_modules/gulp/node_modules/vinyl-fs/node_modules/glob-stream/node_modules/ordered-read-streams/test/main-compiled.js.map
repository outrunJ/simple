{"version":3,"sources":["main.js"],"names":[],"mappings":"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","file":"main-compiled.js","sourcesContent":["var should = require('should');\nvar through = require('through2');\nvar OrderedStreams = require('../');\n\ndescribe('ordered-read-streams', function () {\n  it('should end if no streams are given', function (done) {\n    var streams = OrderedStreams();\n    streams.on('data', function () {\n      done('error');\n    });\n    streams.on('end', done);\n  });\n\n  it('should throw error if one or more streams are not readable', function (done) {\n    var writable = { readable: false };\n\n    try {\n      new OrderedStreams(writable);\n    } catch (e) {\n      e.message.should.equal('All input streams must be readable');\n      done();\n    }\n  });\n\n  it('should emit data from all streams', function(done) {\n    var s1 = through.obj(function (data, enc, next) {\n      this.push(data);\n      next();\n    });\n    var s2 = through.obj(function (data, enc, next) {\n      this.push(data);\n      next();\n    });\n    var s3 = through.obj(function (data, enc, next) {\n      this.push(data);\n      next();\n    });\n\n    var streams = new OrderedStreams([s1, s2, s3]);\n    var results = [];\n    streams.on('data', function (data) {\n      results.push(data);\n    });\n    streams.on('end', function () {\n      results.length.should.be.exactly(3);\n      results[0].should.equal('stream 1');\n      results[1].should.equal('stream 2');\n      results[2].should.equal('stream 3');\n      done();\n    });\n\n    s1.write('stream 1');\n    s1.end();\n\n    s2.write('stream 2');\n    s2.end();\n\n    s3.write('stream 3');\n    s3.end();\n  });\n\n  it('should emit all data event from each stream', function (done) {\n    var s = through.obj(function (data, enc, next) {\n      this.push(data);\n      next();\n    });\n\n    var streams = new OrderedStreams(s);\n    var results = [];\n    streams.on('data', function (data) {\n      results.push(data);\n    });\n    streams.on('end', function () {\n      results.length.should.be.exactly(3);\n      done();\n    });\n\n    s.write('data1');\n    s.write('data2');\n    s.write('data3');\n    s.end();\n  });\n\n  it('should preserve streams order', function(done) {\n    var s1 = through.obj(function (data, enc, next) {\n      var self = this;\n      setTimeout(function () {\n        self.push(data);\n        next();\n      }, 200);\n    });\n    var s2 = through.obj(function (data, enc, next) {\n      var self = this;\n      setTimeout(function () {\n        self.push(data);\n        next();\n      }, 30);\n    });\n    var s3 = through.obj(function (data, enc, next) {\n      var self = this;\n      setTimeout(function () {\n        self.push(data);\n        next();\n      }, 100);\n    });\n\n    var streams = new OrderedStreams([s1, s2, s3]);\n    var results = [];\n    streams.on('data', function (data) {\n      results.push(data);\n    });\n    streams.on('end', function () {\n      results.length.should.be.exactly(3);\n      results[0].should.equal('stream 1');\n      results[1].should.equal('stream 2');\n      results[2].should.equal('stream 3');\n      done();\n    });\n\n    s1.write('stream 1');\n    s1.end();\n\n    s2.write('stream 2');\n    s2.end();\n\n    s3.write('stream 3');\n    s3.end();\n  });\n\n  it('should emit stream errors downstream', function (done) {\n    var s = through.obj(function (data, enc, next) {\n      this.emit('error', new Error('stahp!'));\n      next();\n    });\n    var s2 = through.obj(function (data, enc, next) {\n      this.push(data);\n      next();\n    });\n\n    var errMsg;\n    var streamData;\n    var streams = new OrderedStreams([s, s2]);\n    streams.on('data', function (data) {\n      streamData = data;\n    });\n    streams.on('error', function (err) {\n      errMsg = err.message;\n    });\n    streams.on('end', function () {\n      errMsg.should.equal('stahp!');\n      streamData.should.equal('Im ok!');\n      done();\n    });\n\n    s.write('go');\n    s.end();\n    s2.write('Im ok!');\n    s2.end();\n  });\n});\n"]}