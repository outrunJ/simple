{"version":3,"sources":["index.js"],"names":[],"mappings":";;AAAA,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAE/B,SAAS,IAAI,CAAC,QAAQ,EAAE;AACtB,SAAO,UAAU,IAAI,EAAE;AACrB,WAAO,IAAI,CAAC,QAAQ,CAAC,CAAC;GACvB,CAAC;CACH;;AAED,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC;AACxB,SAAS,MAAM,CAAC,QAAQ,EAAE;AACxB,MAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC;AAC3B,MAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;AAChC,SAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;GACxB,MAAM,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE;AACzC,SAAK,GAAG,QAAQ,CAAC;GAClB;AACD,MAAI,IAAI,GAAG,EAAE,CAAC;AACd,MAAI,CAAC,GAAG,IAAI,MAAM,EAAE,CAAC;AACrB,GAAC,CAAC,QAAQ,GAAG,IAAI,CAAC;AAClB,GAAC,CAAC,QAAQ,GAAG,IAAI,CAAC;AAClB,MAAI,KAAK,GAAG,CAAC,CAAC;;AAEd,GAAC,CAAC,KAAK,GAAG,UAAU,IAAI,EAAE;AACxB,QAAI,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC;AACtB,QAAI,IAAI,CAAC,GAAG,CAAC,KAAK,SAAS,EAAE;AAC3B,UAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;AACjB,OAAC,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;KACtB;GACF,CAAC;;AAEF,MAAI,KAAK,GAAG,CAAC,CAAC;AACd,GAAC,CAAC,GAAG,GAAG,UAAU,IAAI,EAAE;AACtB,QAAI,SAAS,CAAC,MAAM,EAAE,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AACpC,SAAK,EAAE,CAAC;AACR,QAAI,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,CAAC,EAAE;AAClC,OAAC,CAAC,QAAQ,GAAG,KAAK,CAAC;AACnB,OAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACf;GACF,CAAC;;AAEF,GAAC,CAAC,OAAO,GAAG,UAAU,IAAI,EAAE;AAC1B,KAAC,CAAC,QAAQ,GAAG,KAAK,CAAC;GACpB,CAAC;;AAEF,GAAC,CAAC,EAAE,CAAC,MAAM,EAAE,YAAY;AACvB,SAAK,EAAE,CAAC;GACT,CAAC,CAAC;;AAEH,GAAC,CAAC,EAAE,CAAC,QAAQ,EAAE,YAAY;AACzB,SAAK,EAAE,CAAC;GACT,CAAC,CAAC;;AAEH,SAAO,CAAC,CAAC;CACV","file":"index-compiled.js","sourcesContent":["var Stream = require('stream');\n\nfunction prop(propName) {\n  return function (data) {\n    return data[propName];\n  };\n}\n\nmodule.exports = unique;\nfunction unique(propName) {\n  var keyfn = JSON.stringify;\n  if (typeof propName === 'string') {\n    keyfn = prop(propName);\n  } else if (typeof propName === 'function') {\n    keyfn = propName;\n  }\n  var seen = {};\n  var s = new Stream();\n  s.readable = true;\n  s.writable = true;\n  var pipes = 0;\n\n  s.write = function (data) {\n    var key = keyfn(data);\n    if (seen[key] === undefined) {\n      seen[key] = true;\n      s.emit('data', data);\n    }\n  };\n\n  var ended = 0;\n  s.end = function (data) {\n    if (arguments.length) s.write(data);\n    ended++;\n    if (ended === pipes || pipes === 0) {\n      s.writable = false;\n      s.emit('end');\n    }\n  };\n\n  s.destroy = function (data) {\n    s.writable = false;\n  };\n\n  s.on('pipe', function () {\n    pipes++;\n  });\n\n  s.on('unpipe', function () {\n    pipes--;\n  });\n\n  return s;\n}\n"]}