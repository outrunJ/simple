{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["var Readable = require('stream').Readable;\nvar util = require('util');\n\n\nfunction addStream(streams, stream)\n{\n  if(!stream.readable) throw new Error('All input streams must be readable');\n\n  if(this._readableState.ended) throw new Error('Adding streams after ended');\n\n\n  var self = this;\n\n  stream._buffer = [];\n\n  stream.on('data', function(chunk)\n  {\n    if(this === streams[0])\n      self.push(chunk);\n\n    else\n      this._buffer.push(chunk);\n  });\n\n  stream.on('end', function()\n  {\n    for(var stream = streams[0];\n        stream && stream._readableState.ended;\n        stream = streams[0])\n    {\n      while(stream._buffer.length)\n        self.push(stream._buffer.shift());\n\n      streams.shift();\n    }\n\n    if(!streams.length) self.push(null);\n  });\n\n  stream.on('error', this.emit.bind(this, 'error'));\n\n\n  streams.push(stream);\n}\n\n\nfunction OrderedStreams(streams, options) {\n  if (!(this instanceof(OrderedStreams))) {\n    return new OrderedStreams(streams, options);\n  }\n\n  streams = streams || [];\n  options = options || {};\n\n  options.objectMode = true;\n\n  Readable.call(this, options);\n\n\n  if(!Array.isArray(streams)) streams = [streams];\n  if(!streams.length) return this.push(null);  // no streams, close\n\n\n  var addStream_bind = addStream.bind(this, []);\n\n\n  this.concat = function()\n  {\n    Array.prototype.forEach.call(arguments, function(item)\n    {\n      if(Array.isArray(item))\n        item.forEach(addStream_bind);\n\n      else\n        addStream_bind(item);\n    });\n  };\n\n\n  this.concat(streams);\n}\nutil.inherits(OrderedStreams, Readable);\n\nOrderedStreams.prototype._read = function () {};\n\n\nmodule.exports = OrderedStreams;\n"]}