{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["'use strict';\nvar util = require('util');\nvar Transform = require('stream').Transform;\n\nfunction ctor(options, transform) {\n\tutil.inherits(FirstChunk, Transform);\n\n\tif (typeof options === 'function') {\n\t\ttransform = options;\n\t\toptions = {};\n\t}\n\n\tif (typeof transform !== 'function') {\n\t\tthrow new Error('transform function required');\n\t}\n\n\tfunction FirstChunk(options2) {\n\t\tif (!(this instanceof FirstChunk)) {\n\t\t\treturn new FirstChunk(options2);\n\t\t}\n\n\t\tTransform.call(this, options2);\n\n\t\tthis._firstChunk = true;\n\t\tthis._transformCalled = false;\n\t\tthis._minSize = options.minSize;\n\t}\n\n\tFirstChunk.prototype._transform = function (chunk, enc, cb) {\n\t\tthis._enc = enc;\n\n\t\tif (this._firstChunk) {\n\t\t\tthis._firstChunk = false;\n\n\t\t\tif (this._minSize == null) {\n\t\t\t\ttransform.call(this, chunk, enc, cb);\n\t\t\t\tthis._transformCalled = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._buffer = chunk;\n\t\t\tcb();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._minSize == null) {\n\t\t\tthis.push(chunk);\n\t\t\tcb();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._buffer.length < this._minSize) {\n\t\t\tthis._buffer = Buffer.concat([this._buffer, chunk]);\n\t\t\tcb();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._buffer.length >= this._minSize) {\n\t\t\ttransform.call(this, this._buffer.slice(), enc, function () {\n\t\t\t\tthis.push(chunk);\n\t\t\t\tcb();\n\t\t\t}.bind(this));\n\t\t\tthis._transformCalled = true;\n\t\t\tthis._buffer = false;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.push(chunk);\n\t\tcb();\n\t};\n\n\tFirstChunk.prototype._flush = function (cb) {\n\t\tif (!this._buffer) {\n\t\t\tcb();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._transformCalled) {\n\t\t\tthis.push(this._buffer);\n\t\t\tcb();\n\t\t} else {\n\t\t\ttransform.call(this, this._buffer.slice(), this._enc, cb);\n\t\t}\n\t};\n\n\treturn FirstChunk;\n}\n\nmodule.exports = function () {\n\treturn ctor.apply(ctor, arguments)();\n};\n\nmodule.exports.ctor = ctor;\n"]}